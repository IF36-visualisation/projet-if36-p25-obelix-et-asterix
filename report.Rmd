---
title: 'Analyse crois√©e : Superstore & Walmart'
subtitle: "Obelix et Asterix"
author: "Membre: TAKAM TALLA Vigny Brayan, Arthur KAMGA, Chengxian ZHAO, Jianghao LIU"
date: "2025-06-17"
output:
  prettydoc::html_pretty:
    theme: HPSTR
    highlight: github
---

<style>
summary {
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  padding: 12px 16px;
  background: linear-gradient(to right, #0072B5, #009E73); /* m√™me style que la banni√®re */
  color: white;
  border: none;
  border-radius: 8px;
  margin: 20px 0 10px 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: background 0.3s ease;
}

details[open] summary {
  background: linear-gradient(to right, #009E73, #0072B5);
}

details {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 10px 15px;
  background-color: #ffffff;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
  margin-bottom: 20px;
}

details strong {
  font-size: 17px;
  color: #007250; /* vert fonc√© harmonieux */
  display: block;
  margin-top: 10px;
  margin-bottom: 5px;
}
</style>




## Introduction

### Contexte et objectif

Dans le cadre de ce projet, nous avons travaill√© avec **deux jeux de donn√©es diff√©rents mais compl√©mentaires**. Ces donn√©es permettent d‚Äôexplorer plusieurs aspects du commerce de d√©tail : les ventes, les produits, les clients, la rentabilit√©, etc.

- Le premier fichier, appel√© *Superstore*, regroupe presque 10 000 lignes de commandes pass√©es dans une entreprise fictive de e-commerce.
- Le second fichier, bas√© sur des ventes dans des magasins Walmart, contient des donn√©es orient√©es ‚Äúpoint de vente‚Äù : horaires, satisfaction client, modes de paiement...

L‚Äôobjectif est de **mener une exploration** sur les donn√©es. Nous avons voulu comprendre comment ces syst√®mes fonctionnent, ce qui g√©n√®re du profit ou non, et peut-√™tre d√©couvrir des profils de clients, des tendances d‚Äôachat ou des produits phares.  

## Structure et nature des donn√©es

####  [Donn√©es Superstore](https://www.kaggle.com/datasets/aksha17/superstore-sales)

Ce fichier CSV contient **9994 lignes** et **21 variables**. Il s‚Äôagit d‚Äôun historique de ventes avec des informations sur les commandes, les clients, les produits et la logistique.

**Variables num√©riques :**

- `Sales` : montant de la vente.
- `Quantity` : nombre d‚Äôunit√©s vendues.
- `Discount` : remise appliqu√©e.
- `Profit` : profit net.
- `Postal Code`, `Row ID` : identifiants.

**Variables temporelles :**

- `Order Date` : date de commande.
- `Ship Date` : date d‚Äôexp√©dition.

**Variables nominales :**

- `Order ID`, `Customer ID`, `Product ID` : identifiants.
- `Customer Name` : nom du client.
- `Segment` : type de client.
- `Region`, `State`, `City` : localisation.
- `Ship Mode` : mode d‚Äôexp√©dition.
- `Category`, `Sub-Category`, `Product Name` : classification des produits.


#### [Donn√©es Walmart](https://www.kaggle.com/datasets/antaesterlin/walmart-commerce-data)

Ce fichier CSV contient **1000 transactions** et **20 variables**. Il fournit des donn√©es d√©taill√©es sur chaque vente : prix, quantit√©, mode de paiement, heure, etc.

**Variables num√©riques :**

- `unit_price` : prix unitaire.
- `quantity` : quantit√© achet√©e.
- `vat` : taxe.
- `total` : montant total pay√©.
- `cogs` : co√ªt du produit.
- `gross_margin_pct` : pourcentage de marge brute.
- `gross_income` : b√©n√©fice.
- `rating` : note du client (sur 10).

**Variables temporelles :**

- `dtme` : date de la vente.
- `tme` : heure.
- `time_of_day` : moment (matin, apr√®s-midi...).
- `day_name`, `month_name` : jour et mois de l‚Äôachat.

**Variables nominales :**

- `invoice_id` : identifiant de facture.
- `branch`, `city` : lieu.
- `customer_type` : type de client.
- `gender` : genre.
- `product_line` : type de produit.
- `payment_method` : moyen de paiement.

## Chargement des packages et des donn√©es
```{r message=FALSE}
library(ggplot2)
library(dplyr)
library(readr)
library(lubridate)
library(ggcorrplot)
library(patchwork) # important pour combiner les plots
Sys.setlocale("LC_TIME", "fr_FR.UTF-8")

# Importer les donn√©es
superstore <- read_csv("data/superstore.csv")
walmart <- read_delim("data/Walmart.csv", delim = ";")


walmart_time <-walmart
walmart_total<-walmart
superstore_raw<- superstore
```


# Vue d‚Äôensemble et corr√©lations entre variables

## Objectif

Avant de r√©pondre aux diff√©rentes questions d‚Äôanalyse, il est utile de commencer par une **vue d‚Äôensemble** des jeux de donn√©es, afin de :

- Comprendre la structure globale (types de donn√©es, valeurs manquantes, distributions).
- Identifier des **relations entre variables num√©riques** √† l‚Äôaide d‚Äôun graphique de corr√©lation.

Nous utilisons ici deux jeux de donn√©es :

- `Superstore` (ventes inter-entreprises B2B)
- `Walmart` (ventes aux particuliers B2C)

# Vue d'ensemble des deux jeu de donn√©es
```{r echo=FALSE, warning=FALSE}

# Corr√©lation Walmart
num_walmart <- walmart_total %>%
  select(where(is.numeric)) %>%
  na.omit()

cor_walmart <- cor(num_walmart)

ggcorrplot(cor_walmart, lab = TRUE, title = "Corr√©lation entre variables num√©riques (Walmart)")

```

```{r echo=FALSE}
# Corr√©lation Superstore
num_superstore <- superstore %>%
  select(where(is.numeric)) %>%
  na.omit()

cor_superstore <- cor(num_superstore)

ggcorrplot(cor_superstore, lab = TRUE, title = "Corr√©lation entre variables num√©riques (Superstore)")
```

- Une corr√©lation proche de 1 ou -1 indique un lien lin√©aire fort (positif ou n√©gatif).

- Une valeur proche de 0 montre peu ou pas de relation.


<details> 
<summary><strong> Question 1: Quel est le genre des clients qui achetent le plus ?
</strong></summary>

1. Probl√©matique

**Questions pos√©es :**

- Quel est le genre des clients qui achetent le plus ?
- Comment les ventes varient-elles selon le segment de client√®le (Consumer, Corporate, Home Office) ?

**R√©ponse imagin√©e :**

On pourrait s‚Äôattendre √† ce qu‚Äôun genre d√©pense l√©g√®rement plus que l‚Äôautre.

Concernant les segments, il est possible que les consommateurs g√©n√®rent plus de ventes que les autres cat√©gories de clients.

- Titre : D√©penses par Genre (Walmart)
  
- Axes :
  - X : Genre (Female, Male)
  - Y : Montant total des d√©penses

- L√©gende : Genre (rose pour Female, bleu pour Male)

- Outliers (points rouges)
- M√©diane (trait central du boxplot)

**Graphique 2 (√† droite) :**

- Titre : Montant des ventes par Segment (Superstore)
  
- Axes :
  - X : Segment (Consumer, Corporate, Home Office)
  - Y : Montant des ventes

- L√©gende : Segment (couleurs diff√©rentes pour chaque segment)
  - Outliers(points rouges)
  - M√©diane repr√©sent√©e (trait central du boxplot)




```{r, echo = FALSE}

# Cr√©er les deux graphiques
plot1 <- ggplot(walmart, aes(x = gender, y = total, fill = gender)) +
  geom_boxplot(outlier.color = "red", outlier.size = 1.5) +
  stat_summary(fun = mean, geom = "point", shape = 23, size = 4, fill = "yellow") +
  coord_cartesian(ylim = c(0, 1500)) +
  labs(title = "Ventes par genre de client") +
  theme_minimal()

plot2 <- ggplot(superstore, aes(x = Segment, y = Sales, fill = Segment)) +
  geom_boxplot(outlier.color = "red", outlier.size = 1.5) +
  stat_summary(fun = mean, geom = "point", shape = 23, size = 4, fill = "yellow") +
  coord_cartesian(ylim = c(0, 1500)) +
  labs(title = "Ventes par Segment de clients") +
  theme_minimal()

# Les afficher c√¥te √† c√¥te
(plot1 + plot2) + 
  plot_layout(widths = c(1, 2))
```

**Analyse du premier graphique :**

En observant les d√©penses par genre, on remarque que les femmes ont tendance √† d√©penser l√©g√®rement plus que les hommes, bien que la dispersion des d√©penses soit assez similaire entre les deux groupes. Il y a √©galement plusieurs points aberrants, ce qui sugg√®re qu'il existe des clients ayant des d√©penses particuli√®rement √©lev√©es dans les deux cat√©gories. Cette diff√©rence de d√©penses entre les genres semble donc pr√©sente, bien que limit√©e. Cependant, cela soul√®ve une question int√©ressante : Quel r√¥le pourrait jouer le type de produit achet√© dans ces √©carts de d√©penses ?

**Analyse du deuxi√®me graphique :**

Pour le graphique des ventes par segment, on remarque que les m√©dianes sont assez proches entre les segments "Consumer", "Corporate" et "Home Office". Cependant, la distribution des ventes est assez similaire pour tous les segments, avec une forte pr√©sence de points aberrants vers le haut. Le segment "Consumer" semble l√©g√®rement en t√™te, g√©n√©rant davantage de ventes √©lev√©es que les autres. Cela dit, les diff√©rences entre les segments ne sont pas √©normes.
</details>



<details> 
<summary><strong>Question 2: Est-ce que certains jours g√©n√®rent plus de ventes que d'autres ?
</strong></summary>

Nous souhaitons comprendre si certains jours de la semaine influencent le volume de ventes. Pour cela, nous analysons deux jeux de donn√©es : Superstore, qui concerne les ventes entre entreprises (B2B), et Walmart, qui concerne les ventes aux particuliers (B2C). L‚Äôobjectif est d‚Äôidentifier des tendances journali√®res dans le comportement d‚Äôachat.

Nous faisons l‚Äôhypoth√®se suivante :

- Pour Superstore, les ventes seront majoritairement concentr√©es en semaine, car les commandes inter-entreprises se font g√©n√©ralement pendant les jours ouvr√©s.

- Pour Walmart, les ventes seront plus √©lev√©es le week-end, car les particuliers ont davantage de temps libre pour faire leurs achats.

**Superstore - Ventes par jour de la semaine**
```{r, echo = FALSE}
superstore <- superstore %>%
  mutate(Order_Date = as.Date(`Order Date`, format="%d-%m-%y"),
         DayOfWeek = weekdays(Order_Date)) %>%
  group_by(DayOfWeek) %>%
  summarise(Total_Sales = sum(Sales, na.rm = TRUE))

superstore$DayOfWeek <- factor(superstore$DayOfWeek,
                               levels = c("lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"))

ggplot(superstore, aes(x = DayOfWeek, y = Total_Sales, group = 1)) +
  geom_line(color = "steelblue", linewidth = 1.2) +  # üîÅ ici, on remplace size par linewidth
  geom_point(color = "darkblue", size = 3) +
  geom_text(aes(label = round(Total_Sales, 0)), vjust = -1) +
  labs(title = "Superstore : √âvolution des ventes par jour",
       x = "Jour", y = "Ventes ($)") +
  theme_minimal()
```

**Walmart - Ventes par jour de la semaine**

```{r, echo = FALSE}

walmart <- walmart %>%
  mutate(
    dtme = as.Date(dtme),
    DayOfWeek = weekdays(dtme)
  ) %>%
  group_by(DayOfWeek) %>%
  summarise(Total_Sales = sum(total, na.rm = TRUE))

walmart$DayOfWeek <- factor(walmart$DayOfWeek,
                            levels = c("lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi", "dimanche"))

ggplot(walmart, aes(x = DayOfWeek, y = Total_Sales, group = 1)) +
  geom_line(color = "darkgreen", linewidth = 1.2) +  # Remplace `size` par `linewidth`
  geom_point(color = "forestgreen", size = 3) +
  geom_text(aes(label = round(Total_Sales, 0)), vjust = -1) +
  labs(title = "Walmart : √âvolution des ventes par jour de la semaine",
       x = "Jour", y = "Ventes ($)") +
  theme_minimal()
```
**Analyse**
L‚Äôanalyse des ventes par jour de la semaine r√©v√®le des comportements distincts entre Superstore et Walmart. Pour Superstore, les ventes culminent le lundi et le vendredi, tandis que le mercredi enregistre un net creux. Cela s‚Äôexplique par son mod√®le B2B : les entreprises passent commande en d√©but de semaine pour lancer leur activit√©, et en fin de semaine pour anticiper la suivante. Les ventes du week-end restent √©lev√©es, mais l√©g√®rement inf√©rieures. √Ä l‚Äôinverse, Walmart, orient√© B2C, enregistre ses meilleures ventes le samedi, suivi du mardi et du dimanche, reflet du comportement des particuliers qui profitent de leur temps libre le week-end pour faire leurs achats. En semaine, les ventes sont plus faibles, contraintes par les obligations professionnelles ou scolaires.
</details>


<details> 
<summary><strong>Question 3 : Est-ce qu‚Äôune r√©duction fait toujours gagner de l‚Äôargent ?
</strong></summary>

**R√©flexion initiale**

Nous nous sommes pos√© la question suivante : **Accorder une remise sur une vente assure-t-il toujours un b√©n√©fice ?**  
Intuitivement, nous avons suppos√© que si la remise est mod√©r√©e, elle pourrait stimuler les ventes sans trop impacter le profit ; mais qu'une remise trop importante risquerait au contraire de g√©n√©rer des pertes.

Pour valider ou invalider cette intuition, nous avons d√©cid√© de suivre une d√©marche en deux temps :  
- Visualiser la relation globale entre le taux de remise et le profit.  
- Approfondir l'analyse en √©tudiant la distribution du profit pour diff√©rents niveaux de remise.


**M√©thode**

1. Analyse exploratoire initiale :  Nous utilisons d'abord un scatter plot combin√© √† une courbe de r√©gression lin√©aire pour observer la tendance globale entre le taux de remise et le profit.

2. Approfondissement avec une analyse cat√©gorielle :  Afin d'aller plus loin et mieux comprendre l'impact des diff√©rents niveaux de remise, nous introduisons un boxplot par groupe de taux de remise.

Pourquoi utiliser √©galement un boxplot ?  
- Le boxplot nous permet d'analyser plus pr√©cis√©ment la distribution du profit dans chaque cat√©gorie de remise, en visualisant la m√©diane, les quartiles et les valeurs atypiques.  
- Cela apporte une vision plus claire et comparative entre les diff√©rents niveaux de remise.


**Visualisation**

**Partie 1 - Scatter plot : Discount vs Profit**

```{r message=FALSE, echo = FALSE}
library(ggplot2)
library(dplyr)
library(readr)

# Lire les donn√©es Superstore
superstore <- read_csv("data/superstore.csv", show_col_types = FALSE)

# Visualiser Discount vs Profit avec une courbe de tendance
ggplot(superstore, aes(x = Discount, y = Profit)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", color = "blue", se = FALSE) +
  labs(title = "Relation entre Discount et Profit (Superstore)",
       x = "Taux de remise (Discount)",
       y = "Profit ($)") +
  theme_minimal()
```


**Partie 2 - Boxplot : Profit par groupe de Discount**

```{r, echo = FALSE}
# Nettoyer les donn√©es
superstore_clean <- superstore %>%
  filter(!is.na(Discount), !is.na(Profit))

# Cr√©er des groupes de Discount
superstore_clean <- superstore_clean %>%
  mutate(Discount_Group = case_when(
    Discount == 0 ~ "0%",
    Discount > 0 & Discount <= 0.2 ~ "0%-20%",
    Discount > 0.2 & Discount <= 0.4 ~ "20%-40%",
    Discount > 0.4 & Discount <= 0.6 ~ "40%-60%",
    Discount > 0.6 ~ "60%-80%"
  ))

# Visualiser Boxplot
ggplot(superstore_clean, aes(x = Discount_Group, y = Profit, fill = Discount_Group)) +
  geom_boxplot() +
  labs(title = "Distribution du profit selon le taux de remise",
       x = "Cat√©gorie de remise",
       y = "Profit ($)") +
  theme_minimal() +
  theme(legend.position = "none")
```



**Analyse**

Les deux graphiques montrent un lien clair entre le taux de remise et le profit.

Scatter plot : il r√©v√®le une tendance globale n√©gative ‚Äî plus la remise est √©lev√©e, plus le profit diminue.

Boxplot : il pr√©cise cette relation. Jusqu‚Äô√† 20‚ÄØ%, les profits sont majoritairement positifs. Entre 20‚ÄØ% et 40‚ÄØ%, la rentabilit√© chute. Au-del√† de 40‚ÄØ%, la m√©diane devient n√©gative et la variabilit√© augmente fortement.

Diff√©rences entre les deux graphiques
Le scatter plot aide √† voir la tendance g√©n√©rale.

Le boxplot permet de comparer finement les niveaux de remise, en mettant en √©vidence la m√©diane, la dispersion et les valeurs extr√™mes.
</details>


<details> 
<summary><strong>Question 4 :Quels produits rapportent le plus ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question,Nous nous concentrerons principalement sur deux param√®tres : 
**product_line** : ce param√®tre nous informe sur le type de produit, et **gross_income** : ce param√®tre nous indique le b√©n√©fice g√©n√©r√© par le produit.

Nous utiliserons un diagramme en barres pour analyser les donn√©es, car les cat√©gories de produits poss√®dent plusieurs √©tiquettes diff√©rentes, tandis que le revenu des produits est une valeur unique. Apr√®s avoir tri√© les donn√©es, la comparaison entre les produits sera √©galement plus intuitive.

**Visualisation**

**Bar chart: product_line et gross_income**

```{r message=FALSE, echo = FALSE}
library(dplyr)
library(readr)
library(ggplot2)
library(scales)

data <- read_delim(
  "data/Walmart.csv",
  delim = ";", 
  show_col_types = FALSE
)

result <- data %>%
  group_by(product_line) %>%
  summarise(total_gross_income = sum(gross_income, na.rm = TRUE)) %>%
  arrange(desc(total_gross_income))


ggplot(result, aes(x = reorder(product_line, total_gross_income), y = total_gross_income)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() + 
  labs(title = "Revenu total par cat√©gorie de produits",
       x = '',
       y = "Revenu brut (en dollars)") +
  scale_y_continuous(labels = dollar) +
  geom_text(aes(label = dollar(total_gross_income)), 
            position = position_stack(vjust = 0.5),
            size = 4, color = "white") +  
  theme_minimal()
```


**R√©sultat et Conclusion**

Nous pouvons observer que les produits du supermarch√© Walmart sont r√©partis en six cat√©gories. Parmi celles-ci, la vente de food and beverages g√©n√®re le b√©n√©fice le plus √©lev√©, tandis que health and beauty g√©n√®re le b√©n√©fice le plus faible.
Toutefois, il est important de noter que l'√©cart entre eux n'est pas tr√®s important. Pour certains produits, la diff√©rence de b√©n√©fices ne d√©passe m√™me pas 2%. De plus, tous les b√©n√©fices d√©passent 2000 dollars. √âtant donn√© que les donn√©es collect√©es peuvent √™tre influenc√©es par le contexte social et d'autres facteurs √† l'√©poque, nous pouvons conclure qu'au premier trimestre de 2019, la vente de food and beverages g√©n√©rait les b√©n√©fices les plus √©lev√©s.
</details>


<details> 
<summary><strong>Question 5 : Quelles cat√©gories perdent de l‚Äôargent avec les r√©ductions ?
</strong></summary>

Pour r√©pondre √† cette question, nous allons utiliser le dataset Superstore, qui contient des informations sur les remises, profits et cat√©gories de produits.
Nous chercherons √† analyser l'effet des niveaux de remise sur le profit moyen par cat√©gorie, afin d‚Äôidentifier celles qui deviennent non rentables lorsque des r√©ductions sont appliqu√©es.

**Visualisation**

```{r message=FALSE, warning=FALSE, echo = FALSE}
# Nettoyage des donn√©es : s'assurer qu'il n'y a pas de NA dans les variables cl√©s
superstore_clean <- superstore %>%
  filter(!is.na(Discount), !is.na(Profit), !is.na(Category))

# Calculer le profit moyen par cat√©gorie selon les niveaux de remise
profit_by_discount <- superstore_clean %>%
  mutate(remise = case_when(
    Discount == 0 ~ "0%",
    Discount > 0 & Discount <= 0.2 ~ "0-20%",
    Discount > 0.2 & Discount <= 0.4 ~ "20-40%",
    Discount > 0.4 ~ ">40%"
  )) %>%
  group_by(Category, remise) %>%
  summarise(profit_moyen = mean(Profit), .groups = "drop")

# Visualisation
ggplot(profit_by_discount, aes(x = remise, y = profit_moyen, fill = Category)) +
  geom_col(position = "dodge") +
  labs(
    title = "Profit moyen par niveau de remise et cat√©gorie",
    x = "Niveau de remise",
    y = "Profit moyen",
    fill = "Cat√©gorie"
  ) +
  theme_minimal()
```

**Analyse**

On observe que toutes les cat√©gories deviennent non rentables lorsque la remise d√©passe 40%. En particulier, la cat√©gorie Technology affiche une perte moyenne tr√®s importante, proche de -800.

La cat√©gorie Furniture enregistre √©galement des pertes d√®s le niveau de 20‚Äì40% de remise, avec un profit moyen n√©gatif.

En revanche, des remises plus faibles (entre 0 et 20%) restent g√©n√©ralement rentables pour toutes les cat√©gories, notamment Technology, qui affiche un profit moyen positif dans cette tranche.

Cela sugg√®re que les remises √©lev√©es (> 40%) sont globalement d√©savantageuses, et que leur impact varie fortement selon la cat√©gorie de produit.
</details>


<details> 
<summary><strong>Question 6 :Les choses ch√®res sont-elles mieux not√©es ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous nous concentrerons principalement sur deux param√®tres : 
**unit_price** : ce param√®tre indique le prix unitaire des produits, et **rating** : ce param√®tre refl√®te la satisfaction des clients √† travers leur √©valuation.

Nous utiliserons un diagramme de dispersion pour analyser les donn√©es. Bien que le prix et la note soient des variables num√©riques, ils peuvent √™tre consid√©r√©s comme discr√©tisables afin de mieux visualiser leur relation. En observant la distribution des points, nous pourrons d√©terminer s‚Äôil existe une tendance entre le prix et la note, par exemple si les produits plus chers sont mieux not√©s ou s‚Äôil n‚Äôy a pas de lien clair.

**Visualisation**

**Scatter: Unit_price et rating**
```{r echo=FALSE, message=FALSE, warning=FALSE}

ggplot(data, aes(x = unit_price, y = rating)) +
  geom_point(alpha = 0.6, color = "steelblue") +
  labs(title = "Scatter Plot of Unit Price vs Rating",
       x = "Unit Price",
       y = "Rating") +
  theme_minimal()
```


**R√©sultat et Conclusion**

Si les produits plus chers avaient tendance √† √™tre mieux not√©s, les points seraient approximativement align√©s en bande sur le graphique. Cependant, en observant le nuage de points, on constate que les donn√©es sont r√©parties de mani√®re assez uniforme et d√©sordonn√©e sur l'ensemble du graphique. On peut donc conclure qu‚Äôil n‚Äôexiste pas de relation directe entre le prix unitaire et la note.
De plus, nous avons remarqu√© une observation int√©ressante : quelle que soit la valeur du prix unitaire, la note attribu√©e est toujours sup√©rieure ou √©gale √† 4.
</details>


<details> 
<summary><strong>Question 8 : Est-ce qu‚Äôun long d√©lai de livraison fait perdre de l‚Äôargent ?
</strong></summary>

**M√©thode**

Nous cherchons √† savoir si les d√©lais de livraison ont un impact sur le profit g√©n√©r√© par une vente. Autrement dit, est-ce que livrer plus lentement fait perdre de l'argent √† l'entreprise ?

Nous pensons que plus le d√©lai entre commande et exp√©dition est long, plus cela engendre des co√ªts suppl√©mentaires, ce qui pourrait r√©duire le profit. Nous allons visualiser cette relation √† l‚Äôaide d‚Äôun nuage de points accompagn√© d‚Äôune courbe de tendance lin√©aire.

**Visualisation : D√©lai de livraison vs Profit**

```{r echo=FALSE}
library(lubridate)
library(ggplot2)
library(dplyr)
library(readr)

superstore <- superstore_raw %>%
  mutate(Order_Date = as.Date(`Order Date`, format="%d-%m-%y"),
         Ship_Date = as.Date(`Ship Date`, format="%d-%m-%y"),
         Delivery_Days = as.numeric(difftime(Ship_Date, Order_Date, units = "days")))

# Visualisation
ggplot(superstore, aes(x = factor(Delivery_Days), y = Profit)) +
  geom_boxplot(fill = "lightblue") +
  labs(title = "Profit par d√©lai de livraison (Superstore)",
       x = "D√©lai de livraison (jours)",
       y = "Profit ($)") +
  theme_minimal()

```

**Analyse**

√Ä partir du graphique, on observe :

- Le profit est tr√®s variable, quel que soit le nombre de jours de livraison.

- Aucune tendance claire n‚Äôindique qu‚Äôun d√©lai plus long entra√Æne une baisse syst√©matique du profit.

- La majorit√© des profits, quelle que soit la dur√©e, restent autour de z√©ro.

Interpr√©tation :

- Le d√©lai de livraison ne semble pas avoir d‚Äôeffet direct sur la rentabilit√©.

- D‚Äôautres facteurs (comme les frais de port, la cat√©gorie de produit ou la r√©duction) influencent probablement davantage le profit que la dur√©e de livraison seule.
</details>


<details> 
<summary><strong>Question 9 ‚Äì Quelle cat√©gorie a la plus grosse marge ?
</strong></summary>

Pour r√©pondre √† cette question, nous allons analyser le dataset **Superstore**, en nous concentrant sur la **marge b√©n√©ficiaire totale** (Profit) pour chaque **cat√©gorie de produit**.  
Nous allons visualiser la r√©partition des profits √† l‚Äôaide d‚Äôun graphique circulaire (pie chart), afin d‚Äôidentifier la cat√©gorie la plus rentable.

**Visualisation**

```{r message=FALSE, warning=FALSE, echo = FALSE}

Sys.setlocale("LC_ALL", "fr_FR.UTF-8")

# Nettoyage des donn√©es
superstore_clean <- superstore %>%
  filter(!is.na(Category), !is.na(Profit))

# Calcul du profit total par cat√©gorie
marge_par_categorie <- superstore_clean %>%
  group_by(Category) %>%
  summarise(marge_totale = sum(Profit), .groups = "drop") %>%
  mutate(pourcentage = marge_totale / sum(marge_totale) * 100,
         etiquette = paste0(Category, " (", round(pourcentage, 1), "%)"))

# Visualisation
ggplot(marge_par_categorie, aes(x = "", y = marge_totale, fill = Category)) +
  geom_col(width = 1, color = "white") +
  coord_polar(theta = "y") +
  geom_text(aes(label = etiquette), position = position_stack(vjust = 0.5), size = 4) +
  labs(
    title = "R√©partition des marges par cat√©gorie",
    fill = "Cat√©gorie"
  ) +
  theme_void()

```

**Analyse**
Le graphique montre la r√©partition des marges (profits totaux) entre les trois cat√©gories de produits.

On observe que :

La cat√©gorie Technology g√©n√®re la plus grosse marge, repr√©sentant 50,8 % de la marge totale. Cela indique une forte rentabilit√© globale de cette cat√©gorie, malgr√© les pertes occasionnelles en cas de fortes remises.

La cat√©gorie Office Supplies arrive en deuxi√®me position avec 42,8 % des marges. Elle semble relativement stable en termes de rentabilit√©.

En revanche, la cat√©gorie Furniture ne repr√©sente que 6,4 % des marges totales, ce qui souligne une faible contribution au profit global de l‚Äôentreprise. Cette faible marge peut s‚Äôexpliquer par une sensibilit√© plus forte aux remises ou des co√ªts plus √©lev√©s.

En r√©sum√©, la technologie est le moteur principal de la rentabilit√©, tandis que le mobilier semble le moins performant sur le plan des marges.
</details>


<details> 
<summary><strong>Question 10 :Quel moment de la journ√©e rapporte le plus ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous nous concentrerons principalement sur deux param√®tres :
**time_of_day** : ce param√®tre indique le moment de la journ√©e o√π l‚Äôachat a √©t√© effectu√©, et
**gross_income** : ce param√®tre repr√©sente le revenu brut g√©n√©r√© par la transaction.

Nous allons utiliser le graphique en Dount Chart pour analyser les donn√©es, car il est plus facile de visualiser le pourcentage des revenus au fil du temps pour diff√©rentes p√©riodes. En comparant le revenu total g√©n√©r√© √† chaque moment de la journ√©e, nous serons en mesure d‚Äôidentifier les p√©riodes les plus rentables et ainsi d√©terminer quel moment de la journ√©e rapporte le plus d‚Äôargent.


**Visualisation**

**Bar chart: time_of_day et gross_income**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}

income_by_time <- data %>%
  group_by(time_of_day) %>%
  summarise(total_income = sum(gross_income, na.rm = TRUE)) %>%
  arrange(desc(total_income))

income_by_time$time_of_day <- factor(income_by_time$time_of_day,
                                     levels = c("morning", "afternoon", "evening"))
income_by_time <- income_by_time %>%
  mutate(percent = total_income / sum(total_income) * 100,
         label = paste0(round(percent, 1), "%\n$", round(total_income, 1)))

ggplot(income_by_time, aes(x = 2, y = total_income, fill = time_of_day)) +
  geom_bar(stat = "identity", width = 1, color = "white") +
  coord_polar(theta = "y", start = 0) +
  xlim(0.5, 2.5) +
  geom_text(aes(label = label), position = position_stack(vjust = 0.5), color = "white") +
  labs(title = "R√©partition du revenu par tranche horaire de la journ√©e") +
  theme_void() +
  theme(legend.title = element_blank())
```

**R√©sultat et Conclusion**

D‚Äôapr√®s le diagramme en barres, on peut clairement observer que les ventes du matin g√©n√®rent le moins de b√©n√©fices, suivies de l‚Äôapr√®s-midi, tandis que les ventes du soir rapportent le plus. De plus, les b√©n√©fices du matin repr√©sentent moins de la moiti√© de ceux de l‚Äôapr√®s-midi, alors que la diff√©rence entre l‚Äôapr√®s-midi et le soir n‚Äôest pas tr√®s marqu√©e.

Cela m‚Äôa fait penser au cours √âthique et biais de visualisation : comme les tranches horaires du champ time_of_day sont d√©j√† pr√©d√©finies dans le jeu de donn√©es, nous ne connaissons pas la r√©partition exacte des heures. Il est donc possible que, si l‚Äôintervalle de l‚Äôapr√®s-midi avait √©t√© l√©g√®rement √©largi lors de la collecte des donn√©es, cela aurait pu inverser les r√©sultats et faire appara√Ætre l‚Äôapr√®s-midi comme la p√©riode la plus rentable. Ce constat est assez int√©ressant.
</details>


<details> 
<summary><strong>Question 12 : Quels √âtats font le plus de ventes ?
</strong></summary>

**M√©thode**

Nous voulons identifier les r√©gions g√©ographiques les plus actives commercialement, en mesurant la valeur totale des ventes par √âtat dans le jeu de donn√©es Superstore.

Nous supposons que certains √âtats g√©n√®rent beaucoup plus de ventes que d'autres, possiblement en raison de leur population, leur pouvoir d'achat ou leur position g√©ographique strat√©gique. Une repr√©sentation en barplot des ventes totales par √âtat nous permettra de visualiser cette r√©partition.

**Visualisation : Ventes par √âtat**

```{r echo=FALSE}
state_sales <- superstore %>%
  group_by(State) %>%
  summarise(Total_Sales = sum(Sales, na.rm = TRUE)) %>%
  arrange(desc(Total_Sales))

ggplot(state_sales, aes(x = reorder(State, Total_Sales), y = Total_Sales)) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  labs(title = "Total des ventes par √âtat (Superstore)",
       x = "√âtat",
       y = "Ventes ($)") +
  theme_minimal()
```

**Analyse**

Le graphique met en √©vidence des √©carts tr√®s marqu√©s entre les √âtats :

- Californie est de loin l‚Äô√âtat avec le plus grand volume de ventes, suivie par New York et Texas.

- Un petit groupe d‚Äô√âtats concentre l‚Äôessentiel du chiffre d‚Äôaffaires.

- La majorit√© des autres √âtats g√©n√®rent des ventes beaucoup plus faibles, parfois presque n√©gligeables.

Interpr√©tation :

- Les √âtats en t√™te sont g√©n√©ralement plus peupl√©s, plus riches ou plus dens√©ment urbanis√©s, ce qui favorise l‚Äôactivit√© commerciale.

- Cette concentration peut guider les d√©cisions marketing ou logistiques (ciblage, stock, implantation de centres de distribution).
</details>


<details> 
<summary><strong>Question 13 :Quelle r√©gion est la plus performante en termes de rentabilit√© ?
</strong></summary>

**M√©thode**
Pour cette analyse, nous avons utilis√© le jeu de donn√©es Superstore, en nous concentrant sur trois variables cl√©s :

Region : la r√©gion g√©ographique (East, West, South, Central)

Sales : le chiffre d‚Äôaffaires

Profit : le b√©n√©fice

Nous avons proc√©d√© en deux √©tapes :

Agr√©gation des donn√©es par r√©gion, pour obtenir :

Le total des ventes

Le total des profits

La marge b√©n√©ficiaire (Profit / Sales)

Visualisation via un treemap :

La taille de chaque bloc repr√©sente le volume des ventes

La couleur refl√®te la marge b√©n√©ficiaire

Un code couleur du rouge (moins rentable) au vert (plus rentable) facilite l‚Äôinterpr√©tation visuelle

**Visualisation**

```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
if (!requireNamespace("treemapify", quietly = TRUE)) {
  install.packages("treemapify")
}

library(treemapify)

# Pr√©paration des donn√©es : calcul par r√©gion
region_profitability <- superstore %>%
  filter(!is.na(Sales), !is.na(Profit), !is.na(Region)) %>%
  group_by(Region) %>%
  summarise(
    total_sales = sum(Sales),
    total_profit = sum(Profit),
    profit_margin = total_profit / total_sales,
    .groups = "drop"
  )

# Treemap avec des couleurs plus douces
ggplot(region_profitability, 
       aes(area = total_sales, 
           fill = profit_margin, 
           label = paste0(Region, "\n", round(profit_margin*100, 1), "%"))) +
  geom_treemap() +
  geom_treemap_text(colour = "white", place = "centre", grow = TRUE, reflow = TRUE) +
  scale_fill_gradient2(
    low = "#B22222",    
    mid = "#F0E68C",    
    high = "#228B22",   
    midpoint = mean(region_profitability$profit_margin),
    name = "Marge b√©n√©ficiaire"
  ) +
  labs(title = "Rentabilit√© par r√©gion (taille = ventes, couleur = marge)") +
  theme_minimal()


```

**Analyse**
La r√©gion West se d√©marque nettement avec la plus forte marge b√©n√©ficiaire : 14.9%.

Elle est suivie par East (13.5%) et South (11.9%), qui pr√©sentent √©galement une rentabilit√© raisonnable.

En revanche, la r√©gion Central affiche la rentabilit√© la plus faible, avec une marge de seulement 7.9%.

En termes de volume de ventes (taille des blocs), East et West ont des ventes plus importantes que South et Central, ce qui signifie qu‚Äôelles combinent √† la fois volume et rentabilit√©.

Le treemap permet ici une visualisation doublement efficace : il nous montre o√π se r√©alisent les ventes et dans quelle mesure ces ventes sont profitables.

Cette analyse sugg√®re que pour maximiser la rentabilit√©, l‚Äôentreprise pourrait √©tudier les pratiques commerciales mises en ≈ìuvre dans la r√©gion West, et envisager des actions correctives dans la r√©gion Central.
</details>

<details> 
<summary><strong> Question 14 : Quels produits sont beaucoup achet√©s ?
</strong></summary>

**Donn√©es utilis√©es** : `product_line` et `quantity` (jeu de donn√©es Walmart)

---

**M√©thode**

Pour r√©pondre on a:

- Utiliser **product_line** pour identifier les produits.
- Utiliser **quantity** pour mesurer combien de fois chaque produit a √©t√© achet√©.
- Additionner les quantit√©s par type de produit.
- Classer les produits du plus achet√© au moins achet√©

---

**Visualisation : Produits les plus achet√©s**

```{r, echo = FALSE}
library(dplyr)
superstore <- read_csv("data/superstore.csv")
walmart <- read_delim("data/Walmart.csv", delim = ";")

walmart_time <-walmart
walmart_total<-walmart
superstore_raw<- superstore

# Calculer la quantit√© totale par type de produit
produits_walmart <- walmart %>%
  group_by(product_line) %>%
  summarise(Total_Quantity = sum(quantity, na.rm = TRUE)) %>%
  arrange(desc(Total_Quantity))

# Cr√©er le graphique
ggplot(produits_walmart, aes(x = reorder(product_line, Total_Quantity), y = Total_Quantity)) +
  geom_col(fill = "skyblue") +
  coord_flip() +
  labs(title = "Produits les plus achet√©s chez Walmart",
       x = "Produit",
       y = "Quantit√© totale achet√©e") +
  theme_minimal()
```
</details>

<details> 
<summary><strong>Question 15 :Est-ce que la fa√ßon de payer change le prix moyen ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous allons nous concentrer sur deux param√®tres :

**payment_method** : ce param√®tre indique le mode de paiement utilis√© par le client.

**total**: ce param√®tre repr√©sente le montant total pay√© par le client lors de l‚Äôachat.

Nous allons utiliser un diagramme en bo√Æte (boxplot) pour visualiser la distribution des montants en fonction des diff√©rentes m√©thodes de paiement. Le boxplot permet de repr√©senter de mani√®re claire la m√©diane, les quartiles ainsi que les valeurs aberrantes, ce qui nous aide √† d√©terminer si certains moyens de paiement sont associ√©s √† des niveaux de d√©penses diff√©rents, et donc si la m√©thode de paiement a une influence sur le montant pay√© par les clients.


**Visualisation**

**Boxplot: payment_method et total**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}


ggplot(data, aes(x = payment_method, y = total, fill = payment_method)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "R√©partition du montant total des d√©penses selon les diff√©rents modes de paiement",
       x = "payment_method",
       y = "Total") +
  theme_minimal() +
  theme(legend.position = "none")
```


**R√©sultat et Conclusion**
Les trois m√©thodes de paiement (esp√®ces, portefeuille √©lectronique, carte de cr√©dit) ne pr√©sentent pas de diff√©rences significatives en termes de montant moyen pay√©, leurs m√©dianes √©tant relativement proches.
La distribution des montants est √©galement similaire entre les diff√©rentes m√©thodes, avec un nombre et une r√©partition des valeurs aberrantes globalement comparables.
Par cons√©quent, on peut consid√©rer qu‚Äôil n‚Äôy a pas d‚Äôinfluence notable de la m√©thode de paiement sur le montant moyen des achats.
</details>

<details> 
<summary><strong> Question 16 : Quelles sous-cat√©gories ne rapportent pas ?
</strong></summary>

Nous cherchons ici √† identifier les **sous-cat√©gories de produits** (dans Superstore) qui g√©n√®rent **des pertes** ou **un profit tr√®s faible**. Cela peut aider √† d√©cider s‚Äôil faut arr√™ter certains produits, revoir leur prix ou repenser les campagnes marketing.

Pour cela, nous allons agr√©ger les profits par sous-cat√©gorie, puis les visualiser dans un diagramme √† barres. Les sous-cat√©gories non rentables appara√Ætront en rouge.

**Superstore - Profit total par sous-cat√©gorie**

```{r, echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)

# Nettoyage du nom de colonne s'il contient des tirets
names(superstore) <- make.names(names(superstore))

# Agr√©gation des profits
profit_sous_cat <- superstore %>%
  group_by(Sub.Category) %>%
  summarise(Profit_total = sum(Profit, na.rm = TRUE)) %>%
  arrange(Profit_total)

# Visualisation
ggplot(profit_sous_cat, aes(x = reorder(Sub.Category, Profit_total), y = Profit_total, fill = Profit_total > 0)) +
  geom_col(show.legend = FALSE) +
  geom_text(
  aes(label = paste0("$", format(round(Profit_total, 0), big.mark = ","))),
  hjust = ifelse(profit_sous_cat$Profit_total > 0, -0.1, 1.1),
  size = 3.5,
  color = "black"
) +
  scale_fill_manual(values = c("red", "steelblue")) +
  labs(
    title = "Profit net par sous-cat√©gorie (Superstore)",
    subtitle = "En rouge : sous-cat√©gories non rentables",
    x = "Sous-Cat√©gorie",
    y = "Profit total (USD)"
  ) +
  coord_flip() +
  theme_minimal(base_size = 13)
```
Analyse

D‚Äôapr√®s le graphique :

    Les sous-cat√©gories Tables, Bookcases, Supplies et Fasteners sont d√©ficitaires.

    Les plus rentables sont Copiers, Phones et Accessories.

Ces r√©sultats sugg√®rent qu‚Äôune strat√©gie sp√©cifique devrait √™tre envisag√©e pour les produits d√©ficitaires : revoir le pricing, les promotions ou m√™me envisager leur suppression.
</details> 


<details> 
<summary><strong>Question 17 :Quelle boutique gagne le plus d‚Äôargent ?
</strong></summary>

**M√©thode**

Pour identifier la boutique (ville) la plus rentable, nous avons :

Agr√©g√© les profits totaux par ville (City)

Conserver la r√©gion (Region) pour visualiser les diff√©rences g√©ographiques

S√©lectionn√© les 30 villes les plus rentables

Utilis√© un graphe en nuage de bulles (Bubble Cloud) : la taille des bulles repr√©sente le profit total, la couleur la r√©gion

Ce type de visualisation est plus expressif qu‚Äôun simple diagramme en barres : il attire l‚Äôattention sur les villes les plus profitables tout en offrant une vision globale de la r√©partition.

**Visualisation**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
if (!requireNamespace("packcircles", quietly = TRUE)) {
  install.packages("packcircles")
}
if (!requireNamespace("ggrepel", quietly = TRUE)) {
  install.packages("ggrepel")
}

library(packcircles)
library(ggplot2)
library(ggrepel)
library(dplyr)

city_profit <- superstore %>%
  filter(!is.na(City), !is.na(Profit)) %>%
  group_by(City, Region) %>%
  summarise(profit_total = sum(Profit), .groups = "drop") %>%
  arrange(desc(profit_total)) %>%
  slice_max(profit_total, n = 30)

packing <- circleProgressiveLayout(city_profit$profit_total, sizetype = 'area')
city_profit <- cbind(city_profit, packing)

dat.gg <- circleLayoutVertices(packing, npoints = 50)

ggplot() + 
  geom_polygon(data = dat.gg, aes(x, y, group = id, fill = city_profit$Region[id]), colour = "white", alpha = 0.8) +
  geom_text(data = city_profit, aes(x, y, label = City), size = 3, color = "black") +
  scale_fill_brewer(palette = "Set2") +
  theme_void() +
  coord_equal() +
  labs(
    title = "Top 30 des boutiques les plus rentables",
    subtitle = "Taille des bulles = profit total, couleur = r√©gion",
    fill = "R√©gion"
  )

```

**Analyse**

Le graphique met en √©vidence les 30 boutiques (villes) les plus rentables √† travers un nuage de bulles :

La ville la plus rentable est New York City, avec la plus grande bulle, repr√©sentant un profit total nettement sup√©rieur aux autres. Elle appartient √† la r√©gion South (couleur orange clair).

Viennent ensuite Los Angeles, Seattle et San Francisco, toutes trois situ√©es dans la r√©gion West (rose), montrant que cette r√©gion concentre plusieurs boutiques fortement profitables.

La taille des bulles permet de comparer visuellement les profits totaux, tandis que les couleurs indiquent la r√©partition g√©ographique :

West domine en nombre de boutiques rentables dans ce top 30.

South est repr√©sent√©e en t√™te avec New York City.

East et Central sont pr√©sentes, mais avec des bulles globalement plus petites, ce qui sugg√®re des profits moins √©lev√©s.

Ce type de visualisation permet de comparer rapidement les performances financi√®res des boutiques tout en localisant leur r√©gion, offrant ainsi une analyse √† double entr√©e (rentabilit√© + g√©ographie).

Conclusion:
La boutique g√©n√©rant le plus de profit est New York City, situ√©e dans la r√©gion South.

Les r√©gions West et South dominent clairement en termes de rentabilit√© parmi les 30 meilleures boutiques, ce qui pourrait orienter les d√©cisions strat√©giques futures, comme l‚Äôouverture de nouvelles boutiques ou la priorisation des investissements.
</details>

<details> 
<summary><strong>Question 18 :Une r√©duction pousse-t-elle √† acheter plus ?
</strong></summary>

**M√©thode**

Pour r√©pondre √† cette question, nous allons nous concentrer sur deux param√®tres :

**Discount**: Remise appliqu√©e.

**Quantity** : Nombre d‚Äôunit√©s vendues.

Nous utiliserons un diagramme de violon pour voir la relation entre la livraison de chaque transaction et la quantit√© d'achat correspondante. √âtant donn√© que le diagramme de violon peut afficher plus intuitivement les diff√©rences directes entre diff√©rents groupes, nous pouvons voir les valeurs extr√™mes et la distribution globale de diff√©rents groupes en m√™me temps, ce qui nous aide √† mieux tirer des conclusions.

**Visualisation**

**Violin Plot: Discount et Quantity**
```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
data_superStore <- read_delim(
  "data/superstore.csv",
)

data_superStore <- data_superStore %>%
  mutate(Discount_Group = case_when(
    Discount == 0 ~ "0%",
    Discount > 0 & Discount <= 0.2 ~ "0%-20%",
    Discount > 0.2 & Discount <= 0.4 ~ "20%-40%",
    Discount > 0.4 & Discount <= 0.6 ~ "40%-60%",
    Discount > 0.6 ~ "60%-80%",
    TRUE ~ "Autres"
  ))

ggplot(data_superStore, aes(x = Discount_Group, y = Quantity, fill = Discount_Group)) +
  geom_violin(trim = FALSE, alpha = 0.7) +
  geom_boxplot(width = 0.1, outlier.size = 0.5, color = "black", alpha = 0.6) +
  labs(title = "Distribution de la quantit√© achet√©e selon les niveaux de remise",
       x = "Niveau de remise (Discount)",
       y = "Quantit√© achet√©e") +
  theme_minimal() +
  theme(legend.position = "none")
```

**R√©sultat et Conclusion**
√Ä partir de ce graphique en violon, on peut observer les donn√©es suivantes de mani√®re intuitive :
Tout d‚Äôabord, la majorit√© des quantit√©s achet√©es se situe entre 2 et 5 unit√©s.
Bien qu‚Äôil existe des remises √©lev√©es (groupes √† droite), leur forme de distribution est similaire √† celle des faibles remises, voire avec une m√©diane l√©g√®rement plus basse.
Il est donc √©vident que des remises importantes (plus de 40 %) n‚Äôincitent pas significativement les clients √† acheter davantage.
Les commandes sans remise (0 %) affichent √©galement une m√©diane de quantit√© achet√©e similaire, voire l√©g√®rement sup√©rieure, ce qui indique que la remise n‚Äôest pas un facteur d√©terminant du volume d‚Äôachat.
</details>


<details> 
<summary><strong>Question 19 : Est-ce que les gens notent mieux s‚Äôils paient plus ?
</strong></summary>

Nous voulons savoir s‚Äôil existe une relation entre le montant d√©pens√© par un client et la note qu‚Äôil attribue √† son exp√©rience d‚Äôachat.

Nous √©mettons l‚Äôhypoth√®se que payer plus pourrait √™tre associ√© √† une meilleure satisfaction, car le client peut percevoir une meilleure qualit√© de service ou de produit. Nous analyserons cela via un nuage de points avec courbe de tendance lin√©aire.

**Visualisation : Total pay√© vs Note client**

```{r echo=FALSE}

library(dplyr)

walmart_total %>%
  mutate(total_bin = cut(total, 
                         breaks = c(0, 100, 200, 300, 400, 500, 600, 1000),
                         labels = c("0-100", "100-200", "200-300", "300-400", "400-500", "500-600", "600+"))) %>%
  filter(!is.na(total_bin)) %>%     # <-- Cette ligne filtre les NA
  group_by(total_bin) %>%
  summarise(mean_rating = mean(rating, na.rm = TRUE)) %>%
  ggplot(aes(x = total_bin, y = mean_rating)) +
  geom_col(fill = "steelblue") +
  geom_text(aes(label = round(mean_rating, 2)), vjust = -0.5) +
  labs(title = "Note moyenne par tranche de total pay√©",
       x = "Tranche de montant total ($)",
       y = "Note moyenne") +
  theme_minimal()
```

**Analyse**

Les meilleures notes sont observ√©es dans les tranches 100‚Äì200‚ÄØ$ (7.22) et 500‚Äì600‚ÄØ$ (7.28).

Les tranches 200‚Äì500‚ÄØ$ restent globalement stables, avec des notes autour de 7.0.

En dessous de 100‚ÄØ$ et au-dessus de 600‚ÄØ$, les notes sont plus basses : respectivement 6.8 et 6.71, et 6.2 pour les valeurs manquantes.

Interpr√©tation :

Il n‚Äôexiste pas de relation lin√©aire forte entre montant pay√© et satisfaction.

Toutefois, une d√©pense mod√©r√©e √† √©lev√©e (100‚Äì600‚ÄØ$) semble associ√©e √† des notes l√©g√®rement meilleures.

Cela peut s‚Äôexpliquer par une meilleure exp√©rience per√ßue lorsque le client paie pour des produits ou services de meilleure qualit√©.
</details>


<details> 
<summary><strong> Question 20 : √Ä quelle heure ach√®te-t-on le plus ?
</strong></summary>

Nous cherchons √† savoir √† quel moment de la journ√©e les clients r√©alisent le plus d‚Äôachats dans le magasin Walmart. Cette information peut aider √† mieux comprendre les habitudes d‚Äôachat et √† adapter les ressources (personnel, stock, promotions) en fonction des heures de forte activit√©.

Nous supposons que les clients font davantage d‚Äôachats autour de midi (pause d√©jeuner) et en fin de journ√©e (apr√®s le travail). Pour tester cela, nous allons extraire l‚Äôheure √† partir de la variable tme, regrouper les montants totaux par heure, et les repr√©senter sous forme de barplot.

**Walmart - R√©partition des ventes par heure**

```{r, echo = FALSE}
walmart_time <- walmart_time %>%
  mutate(Hour = hour(hms(tme))) %>%
  group_by(Hour) %>%
  summarise(Total_Sales = sum(total, na.rm = TRUE))

ggplot(walmart_time, aes(x = Hour, y = Total_Sales)) +
  geom_col(fill = "darkblue") +
  geom_text(aes(label = round(Total_Sales, 0)), vjust = -0.5) +
  labs(title = "Walmart : Ventes totales par heure", x = "Heure de la journ√©e", y = "Ventes ($)") +
  scale_x_continuous(breaks = 0:23) +
  theme_minimal()
```
**Analyse**

Le graphique met en √©vidence deux pics de ventes : autour de 13h, correspondant √† la pause d√©jeuner, et vers 19h, √† la sortie du travail. Les ventes sont plus faibles entre 16h et 17h, une p√©riode interm√©diaire, et chutent nettement apr√®s 20h. Cela sugg√®re que les clients font principalement leurs achats pendant leurs temps libres, notamment √† midi et en fin de journ√©e, tandis que l‚Äôactivit√© est r√©duite t√¥t le matin et tard le soir, en raison d'autres contraintes comme le sommeil, les repas ou les horaires de travail.
</details>



## Shiny
Afin de compl√©ter notre analyse avec une approche plus dynamique, nous avons d√©velopp√© une application Shiny interactive qui permet de manipuler les filtres et de visualiser les r√©sultats en temps r√©el. Voici un aper√ßu de certains graphiques g√©n√©r√©s via cette application.


### Ventes par jour

![Ventes par jour](data/shiny_image/image1.png)


Cette figure montre la r√©partition des ventes totales de Walmart selon les jours de la semaine, pour la p√©riode s√©lectionn√©e via l‚Äôinterface, ici : du 1er au 7 janvier 2019.

On observe que Les ventes culminent le mardi, suivi par le dimanche et le samedi, ce qui sugg√®re une activit√© plus intense en d√©but et fin de semaine.
Les jours mercredi √† vendredi affichent des niveaux de ventes plus faibles, notamment le vendredi.

La possibilit√© de choisir une autre p√©riode dans l‚Äôapplication Shiny permet √† l‚Äôutilisateur d‚Äôexplorer s‚Äôil s‚Äôagit d‚Äôun ph√©nom√®ne ponctuel ou d‚Äôune tendance r√©currente. Ce type de visualisation interactive rend l‚Äôanalyse temporelle des ventes bien plus flexible.

### Relation entre la remise et le profit
![](data/shiny_image/image2.png)
Ce nuage de points explore la relation entre le taux de remise appliqu√© (Discount) et le profit g√©n√©r√© (Profit). Sur la plage s√©lectionn√©e (28% √† 74%), on observe une diminution nette du profit √† mesure que la remise augmente. Cette tendance est confirm√©e par la droite de r√©gression lin√©aire qui montre une pente n√©gative marqu√©e.

Les points les plus denses sous l‚Äôaxe z√©ro r√©v√®lent que les remises √©lev√©es sont souvent associ√©es √† des pertes. Cela sugg√®re qu‚Äôau-del√† d‚Äôun certain seuil (‚âà30%), les r√©ductions ne stimulent plus la rentabilit√©, voire l‚Äôannulent totalement.

L‚Äôinteractivit√© du Shiny permet ici de tester diff√©rents sc√©narios : en ajustant la plage de remises, on peut visualiser comment la rentabilit√© √©volue en fonction des politiques commerciales. C‚Äôest un outil pr√©cieux pour l‚Äôaide √† la d√©cision, en particulier dans les contextes de promotion ou de liquidation.

###  Top Produits
![](data/shiny_image/image3.png)

Le graphique ci-dessus pr√©sente les produits g√©n√©rant le plus de profit dans le dataset Superstore. Gr√¢ce au curseur interactif, l‚Äôutilisateur peut choisir le nombre de produits affich√©s (ici 14), facilitant ainsi l‚Äôexploration cibl√©e des articles les plus rentables.

On remarque que certains produits, comme le Canon imageCLASS 2200 Advanced Copier, affichent un profit tr√®s largement sup√©rieur aux autres ‚Äì d√©passant les 25 000$. Cette distribution fortement asym√©trique sugg√®re que les b√©n√©fices sont concentr√©s sur un nombre restreint d‚Äôarticles √† forte valeur ajout√©e (imprimantes, relieuses, destructeurs de documents).

Ce graphique met donc en √©vidence une d√©pendance au profit sur quelques produits, ce qui a des implications en gestion des stocks.

### Profit Cat√©gories
![](data/shiny_image/image4.png)

Dans cette version interactivement filtr√©e du graphique, nous avons volontairement exclu la cat√©gorie ¬´¬†Furniture¬†¬ª afin de mieux observer les dynamiques sp√©cifiques aux cat√©gories ¬´¬†Office Supplies¬†¬ª et ¬´¬†Technology¬†¬ª.

On note ici que m√™me dans les tranches de remise les plus basses (0‚Äì20 %), les profits moyens sont relativement faibles. D√®s que les remises d√©passent 40 %, la cat√©gorie Technology entre en perte nette significative, et cette tendance se prolonge au-del√† de 60 % de remise. En revanche, la cat√©gorie ¬´¬†Office Supplies¬†¬ª semble l√©g√®rement plus r√©siliente, bien que les marges y deviennent √©galement n√©gatives au-del√† de 60 %.

### Profits par Segment

![](data/shiny_image/image5.png)

Dans cette vue interactive, l'utilisateur a s√©lectionn√© un regroupement par Segment client (Consumer, Corporate, Home Office), ce qui permet de visualiser instantan√©ment les contributions respectives de chaque segment au profit total.

On observe que le segment Consumer g√©n√®re de loin le profit le plus important, suivi par le segment Corporate, tandis que le segment Home Office reste en retrait.

### Produits populaires

![](data/shiny_image/image6.png)

Dans cette section, nous avons utilis√© Shiny pour explorer une question o√π l'interactivit√© est indispensable :

Quels sont les produits les plus populaires dans chaque ville du r√©seau Walmart ?

En effet, r√©pondre √† cette question avec un graphique statique (type ggplot2) n√©cessiterait soit de g√©n√©rer une figure diff√©rente pour chaque ville, soit de cr√©er une figure complexe et illisible regroupant toutes les localit√©s. Aucune de ces approches ne permet une exploration fluide des pr√©f√©rences locales.


## Conclusion

Ce projet d‚Äôanalyse crois√©e entre les jeux de donn√©es Superstore et Walmart nous a permis d‚Äôexplorer plusieurs aspects du comportement d‚Äôachat, de la rentabilit√© produit √† la segmentation client, en passant par l‚Äôinfluence des remises et la dimension g√©ographique.

Nous avons pu identifier plusieurs tendances :

- Les remises importantes ont souvent un effet n√©gatif sur les profits, en particulier dans les **cat√©gories sensibles comme la technologie**.
- Les segments de clients ‚ÄúConsumer‚Äù g√©n√®rent le plus de profits, tandis que le segment ‚ÄúHome Office‚Äù est plus marginal.
- Les produits les plus rentables ne sont pas n√©cessairement ceux les plus populaires, ce qui souligne l‚Äôimportance d‚Äôune analyse crois√©e entre quantit√© vendue et rentabilit√© unitaire.
- Gr√¢ce √† l‚Äôint√©gration de Shiny, nous avons pu explorer des dynamiques locales (ville par ville) ou personnalisables, ce qui serait difficilement faisable dans un rapport statique.

#### Difficult√©s rencontr√©es

La fusion des deux jeux de donn√©es a √©t√© impossible en l‚Äô√©tat, car leurs structures, colonnes et logiques sont tr√®s diff√©rentes. Nous avons donc opt√© pour une analyse parall√®le.

#### Pistes d‚Äôam√©lioration

Int√©grer une analyse temporelle plus approfondie, par exemple l‚Äô√©volution mensuelle ou saisonni√®re des profits.

### Contributions individuelles

#### Chengxian ZHAO
Ce projet m‚Äôa permis de consolider plusieurs comp√©tences fondamentales en visualisation de donn√©es. J‚Äôai appris √† structurer une analyse exploratoire √† partir de jeux de donn√©es r√©els, √† manipuler et filtrer efficacement les donn√©es avec `dplyr`, puis √† concevoir des visualisations claires et interpr√©tables avec `ggplot2`. L‚Äôint√©gration de l‚Äôapplication Shiny m‚Äôa √©galement permis de mettre en ≈ìuvre des visualisations interactives, en ma√Ætrisant les logiques r√©actives de l‚Äôinterface et la construction de tableaux de bord via `shinydashboard`.

#### Jianghao LIU
J‚Äôai utilis√© diff√©rentes techniques de visualisation afin de faire en sorte que la pr√©sentation des conclusions se rapproche au mieux de ce que nous souhaitions mettre en √©vidence.
J‚Äôaurais aim√© utiliser les comp√©tences acquises dans le cours IF29 pour analyser et mod√©liser les donn√©es avant de les visualiser, afin de voir si cela aurait pu faire √©merger des diff√©rences ou de nouvelles conclusions.

#### Vigny Brayan TAKAM TALLA
J‚Äôai appris √† bien structurer un projet d‚Äôanalyse avec des questions claires, √† faire parler les donn√©es √† travers des graphiques et √† r√©diger un README compr√©hensible. J‚Äôaurais aussi trouv√© int√©ressant que les deux jeux de donn√©es aient le m√™me format et le m√™me volume, car √ßa aurait permis de faire une vraie comparaison directe entre le e-commerce et la vente physique.

## Annexe 

Voici le d√©tail des contributions :

#### Chengxian ZHAO
Question 3, 5, 9, 13, 17 

D√©veloppement complet des fichiers `server.R` et `ui.R` pour l‚Äôapplication Shiny 

Int√©gration de l‚Äôinterface avec `shinydashboard`

#### Jianghao LIU
Au total, notre groupe a discut√© d‚Äôune vingtaine de questions √† analyser, et j‚Äôen ai trait√© cinq moi-m√™me. 

J‚Äôai √©galement particip√© √† la conception et √† la mise en place de l‚Äôapplication Shiny.

#### Vigny Brayan TAKAM TALLA
R√©daction du README.md, cr√©ation des questions 2, 8, 12, 19, 20, mise en page du rapport RMarkdown

