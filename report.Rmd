## Question 3 : Est-ce qu’une réduction fait toujours gagner de l’argent ?

### Méthode

Pour répondre à cette question, nous exploitons le jeu de données **Superstore**, qui contient deux variables clés :
- `Discount` : le taux de remise appliqué sur chaque vente (entre 0% et 80%).
- `Profit` : le bénéfice réalisé sur chaque vente.

Notre approche comporte plusieurs étapes :

1. **Analyse exploratoire initiale** :  
   Nous utilisons d'abord un **scatter plot** (nuage de points) combiné à une **courbe de régression linéaire** pour observer la tendance globale entre le taux de remise et le profit.

2. **Approfondissement avec une analyse catégorielle** :  
   Afin d'aller plus loin et mieux comprendre l'impact des différents niveaux de remise, nous introduisons un **boxplot** par groupe de taux de remise.

**Pourquoi utiliser également un boxplot ?**
- Le scatter plot montre la relation générale mais reste dispersé et sensible aux valeurs extrêmes.
- Le boxplot permet de mieux analyser la **distribution du profit dans chaque catégorie de remise**, en visualisant la médiane, les quartiles et les valeurs atypiques.
- Cela apporte une vision plus claire et comparative entre les différents niveaux de remise.

### Visualisation

#### Partie 1 - Scatter plot : Discount vs Profit

```{r}
library(ggplot2)
library(dplyr)
library(readr)

# Lire les données Superstore
superstore <- read_csv("data/superstore.csv", show_col_types = FALSE)

# Visualiser Discount vs Profit avec une courbe de tendance
ggplot(superstore, aes(x = Discount, y = Profit)) +
  geom_point(alpha = 0.5) +
  geom_smooth(method = "lm", color = "blue", se = FALSE) +
  labs(title = "Relation entre Discount et Profit (Superstore)",
       x = "Taux de remise (Discount)",
       y = "Profit ($)") +
  theme_minimal()
```


#### Partie 2 - Boxplot : Profit par groupe de Discount

```{r}
# Nettoyer les données
superstore_clean <- superstore %>%
  filter(!is.na(Discount), !is.na(Profit))

# Créer des groupes de Discount
superstore_clean <- superstore_clean %>%
  mutate(Discount_Group = case_when(
    Discount == 0 ~ "0%",
    Discount > 0 & Discount <= 0.2 ~ "0%-20%",
    Discount > 0.2 & Discount <= 0.4 ~ "20%-40%",
    Discount > 0.4 & Discount <= 0.6 ~ "40%-60%",
    Discount > 0.6 ~ "60%-80%"
  ))

# Visualiser Boxplot
ggplot(superstore_clean, aes(x = Discount_Group, y = Profit, fill = Discount_Group)) +
  geom_boxplot() +
  labs(title = "Distribution du profit selon le taux de remise",
       x = "Catégorie de remise",
       y = "Profit ($)") +
  theme_minimal() +
  theme(legend.position = "none")
```



## Analyse graphique

### Avec le scatter plot :

- On observe une **tendance globale légèrement négative** entre le taux de remise et le profit.
- Plus la remise augmente, plus les profits tendent à baisser.

### Avec le boxplot :

- La **structure des données** devient plus claire.
- Jusqu'à **20% de remise**, les profits restent majoritairement **positifs**.
- Dès que la remise dépasse **40%**, la **médiane du profit devient négative**.
- La **variabilité augmente fortement** avec les remises élevées.

### Différence entre Scatter plot et Boxplot pour ce problème :

Le **boxplot** permet de **comparer proprement les profits** selon des niveaux précis de remise, en mettant en évidence :

- Les tendances centrales (**médiane**)
- La dispersion (**écart interquartile**)

## Résultat

- Sans remise ou avec une remise légère (**0%-20%**), les ventes restent **rentables** dans l'ensemble.
- Dès que la remise atteint **20%-40%**, la rentabilité **diminue**.
- Pour des remises supérieures à **40%**, les **pertes deviennent la norme** pour la majorité des transactions.

## Conclusion

Notre étude démontre que :

- **Accorder une réduction importante ne garantit pas un profit** ; au contraire, cela augmente significativement le risque de pertes.
- Le **scatter plot** a permis de détecter une tendance générale.
- Le **boxplot** a confirmé et précisé que **les remises élevées mènent à des profits négatifs**.


